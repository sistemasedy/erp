<odoo>
   <!-- ================================================================ -->
    <!-- ARCHIVO: views/menu.xml -->
    <!-- ESTRUCTURA DE MENÚS -->
    <!-- ================================================================ -->

    <!-- MENÚ PRINCIPAL -->
    <menuitem id="menu_construction_root"
              name="Construcción"
              sequence="10"
              web_icon="construction_subcontracts,static/description/icon.png"/>

    <!-- SUBMENÚ: SUBCONTRATOS -->
    <menuitem id="menu_construction_subcontracts"
              name="Subcontratos"
              parent="menu_construction_root"
              sequence="10"/>

    <!-- ACCIÓN: LISTA DE SUBCONTRATOS -->
    <record id="action_construction_subcontract" model="ir.actions.act_window">
        <field name="name">Subcontratos</field>
        <field name="res_model">construction.subcontract</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'search_default_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                ¡Crea tu primer Subcontrato!
            </p>
            <p>
                Los subcontratos te permiten controlar los pagos a ajusteros
                basados en el avance real de la obra, con retención de garantía.
            </p>
        </field>
    </record>

    <menuitem id="menu_construction_subcontract_list"
              name="Todos los Contratos"
              parent="menu_construction_subcontracts"
              action="action_construction_subcontract"
              sequence="10"/>

    <!-- ACCIÓN: LISTA DE AVANCES -->
    <record id="action_construction_work_progress" model="ir.actions.act_window">
        <field name="name">Avances de Obra</field>
        <field name="res_model">construction.work.progress</field>
        <field name="view_mode">tree,form,calendar</field>
        <field name="context">{'search_default_this_week': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No hay avances registrados
            </p>
            <p>
                Los avances se registran semanalmente desde la tablet del capataz
                y deben ser validados por el ingeniero antes de generar el pago.
            </p>
        </field>
    </record>

    <menuitem id="menu_construction_work_progress_list"
              name="Avances Semanales"
              parent="menu_construction_subcontracts"
              action="action_construction_work_progress"
              sequence="20"/>

    <!-- ACCIÓN: AVANCES PENDIENTES (para ingenieros) -->
    <record id="action_construction_work_progress_pending" model="ir.actions.act_window">
        <field name="name">Avances Pendientes de Validación</field>
        <field name="res_model">construction.work.progress</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('state', '=', 'pending')]</field>
        <field name="context">{'create': False}</field>
    </record>

    <menuitem id="menu_construction_work_progress_pending"
              name="⚠️ Pendientes Validación"
              parent="menu_construction_subcontracts"
              action="action_construction_work_progress_pending"
              sequence="5"
              groups="construction_subcontracts.group_construction_engineer"/>

    <!-- SUBMENÚ: REPORTES -->
    <menuitem id="menu_construction_reports"
              name="Reportes"
              parent="menu_construction_root"
              sequence="90"/>

    <!-- SUBMENÚ: CONFIGURACIÓN -->
    <menuitem id="menu_construction_config"
              name="Configuración"
              parent="menu_construction_root"
              sequence="100"
              groups="base.group_system"/>
</odoo>