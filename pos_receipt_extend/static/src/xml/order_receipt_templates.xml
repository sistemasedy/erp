<?xml version="1.0" encoding="UTF-8"?>
<templates id="point_of_sale.template" xml:space="preserve">
    <t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
       <xpath expr="//div[hasclass('orderlines')]" position="replace"> 
            <div class="orderlines">      
                <!-- Detalles de productos -->
                <table style="width: 100%; font-size: 12px; border-collapse: collapse; margin-bottom: 10px;">
                    <thead>
                        <tr style="border-bottom: 1px dashed black;">
                            <th style="text-align: left;">Product</th>
                            <th style="text-align: center;">Qty</th>
                            <th style="text-align: right;">Unit Price</th>
                            <th style="text-align: right;">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr t-foreach="receipt.orderlines" t-as="line">
                            <td><t t-esc="line.product_name"/></td>
                            <td style="text-align: center;"><t t-esc="line.quantity"/></td>
                            <td style="text-align: right;"><t t-esc="line.price_unit"/></td>
                            <td style="text-align: right;"><t t-esc="line.price_subtotal_incl"/></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
       </xpath>

       <!-- Reemplazo de los totales -->
        <xpath expr="//div[@class='pos-receipt-right-align'][following-sibling::div[@class='pos-receipt-amount']]" position="replace">
            <div style="text-align: right; margin-bottom: 10px;">
                <div><strong>Subtotal:</strong> <t t-esc="env.pos.format_currency(receipt.subtotal)" /></div>
                <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">
                    <div>
                        <strong><t t-esc="tax.name" />:</strong> 
                        <span t-esc="env.pos.format_currency_no_symbol(tax.amount)" />
                    </div>
                </t>
                <div><strong>Total Taxes:</strong> <t t-esc="env.pos.format_currency(receipt.total_tax)" /></div>
                <hr style="border: 1px dashed black;" />
                <div><strong>Total:</strong> <t t-esc="env.pos.format_currency(receipt.total_with_tax)" /></div>
                <t t-if="receipt.total_rounded != receipt.total_with_tax">
                    <div><strong>Rounding:</strong> <t t-esc="env.pos.format_currency(receipt.rounding_applied)" /></div>
                    <div><strong>To Pay:</strong> <t t-esc="env.pos.format_currency(receipt.total_rounded)" /></div>
                </t>
            </div>
        </xpath>
       
    </t>
</templates>
