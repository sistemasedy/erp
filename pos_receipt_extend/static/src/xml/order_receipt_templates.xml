<?xml version="1.0" encoding="UTF-8"?>
<templates id="point_of_sale.template" xml:space="preserve">
    <t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('pos-receipt')]" position="replace">
            <!--
              Se aumenta el tamaño de fuente base para todo el recibo a 14px.
              Los elementos internos heredarán este tamaño a menos que se especifique lo contrario.
            -->
            <div class="pos-receipt" style="font-size: 14px; line-height: 1.4;">
                <t t-if="receipt.company.logo">
                    <img class="pos-receipt-logo" t-att-src="receipt.company.logo" alt="Logo"/>
                    <br/>
                </t>
                <t t-if="!receipt.company.logo">
                    <!-- Aumentamos el tamaño del nombre de la empresa para mayor jerarquía -->
                    <h2 class="pos-receipt-center-align" style="font-size: 18px;">
                        <t t-esc="receipt.company.name" />
                    </h2>
                    <br/>
                </t>
                <div class="pos-receipt-contact">
                    <t t-if="receipt.company.contact_address">
                        <div><t t-esc="receipt.company.contact_address" /></div>
                    </t>
                    <t t-if="receipt.company.phone">
                        <div>Teléfono: <t t-esc="receipt.company.phone" /></div>
                    </t>
                    <t t-if="receipt.company.vat">
                        <div><t t-esc="receipt.company.vat_label"/>: <t t-esc="receipt.company.vat" /></div>
                    </t>
                    <t t-if="receipt.company.email">
                        <div>Email: <t t-esc="receipt.company.email" /></div>
                    </t>
                    <t t-if="receipt.company.website">
                        <div>Sitio Web: <t t-esc="receipt.company.website" /></div>
                    </t>
                    <t t-if="receipt.header_html">
                        <t t-raw="receipt.header_html" />
                    </t>
                    <t t-if="!receipt.header_html and receipt.header">
                        <div style="white-space:pre-line"><t t-esc="receipt.header" /></div>
                    </t>
                    <t t-if="receipt.cashier">
                        <div class="cashier">
                            <div>--------------------------------</div>
                            <div>Atendido por: <t t-esc="receipt.cashier" /></div>
                        </div>
                    </t>
                </div>
                <br /><br />

                <!-- Detalles de productos: Heredan el font-size de 14px del contenedor principal -->
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px;">
                    <thead>
                        <tr style="border-bottom: 1px dashed black;">
                            <th style="text-align: left;">Producto</th>
                            <th style="text-align: center;">Cant.</th>
                            <th style="text-align: right;">Pre.</th>
                            <th style="text-align: right;">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr t-foreach="orderlines" t-as="orderline" t-key="orderline.id">
                            <td>
                                <t t-esc="orderline.get_product().display_name"/>
                                <t t-if="orderline.get_discount() > 0">
                                    <div class="pos-disc-font">
                                        With a <t t-esc="orderline.get_discount()"/>% discount
                                    </div>
                                </t>
                            </td>
                            <td style="text-align: center;">
                                <t t-esc="orderline.get_quantity_str_with_unit()"/>
                            </td>
                            <td style="text-align: right;">
                                <t t-esc="orderline.get_unit_display_price()"/>
                            </td>
                            <td style='text-align:right'>
                                <t t-esc="orderline.get_price_with_tax()"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <hr style="border: 1px dashed black;"/>

                <!-- Totales: Heredan el font-size de 14px -->
                <div style="text-align: right; margin-bottom: 10px;">
                    <div>Descuentos: <t t-esc="receipt.total_discount"/></div>
                    <div>Impuestos: <t t-esc="receipt.total_tax"/></div>
                    <div>Total: <t t-esc="receipt.total_with_tax"/></div>
                </div>

                <!-- Pagos: Heredan el font-size de 14px -->
                <div style="margin-bottom: 10px;">
                    <t t-foreach="receipt.paymentlines" t-as="paymentline">
                        <div><t t-esc="paymentline.name"/>: <t t-esc="env.pos.format_currency(paymentline.amount)"/></div>
                    </t>
                    <div>Cambio: <t t-esc="env.pos.format_currency(receipt.change)"/></div>
                </div>

                <!-- Mensaje de agradecimiento: Aumentado y en negrita para destacar -->
                <div style="text-align: center; font-size: 16px; margin-top: 10px; font-weight: bold;">
                    ¡GRACIAS! ¡VUELVA PRONTO!
                </div>
                <br/><br/>

                <!-- Footer y otros datos -->
                <div t-if="receipt.footer_html" class="pos-receipt-center-align">
                    <t t-raw="receipt.footer_html" />
                </div>
                <div t-if="!receipt.footer_html and receipt.footer" class="pos-receipt-center-align" style="white-space:pre-line">
                    <br/>
                    <t t-esc="receipt.footer" />
                    <br/><br/>
                </div>
                <div class="after-footer">
                    <t t-foreach="receipt.paymentlines" t-as="line">
                        <t t-if="line.ticket">
                            <br />
                            <div class="pos-payment-terminal-receipt">
                                <t t-raw="line.ticket" />
                            </div>
                        </t>
                    </t>
                </div>
                <br/>
                <div class="pos-receipt-order-data">
                    <div><t t-esc="receipt.name" /></div>
                    <t t-if="receipt.date.localestring">
                        <div><t t-esc="receipt.date.localestring" /></div>
                    </t>
                    <t t-else="">
                        <div><t t-esc="receipt.date.validation_date" /></div>
                    </t>
                </div>
            </div>
        </xpath>
    </t>
</templates>


