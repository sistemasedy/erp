<?xml version="1.0"  encoding="utf-8"?>
<odoo>
    <data>
    
    <record id="view_loan_req_tree" model="ir.ui.view">
        <field name="name">loan.request.tree</field>
        <field name="model">loan.request</field>
        <field name="priority">2</field>
        <field name="arch" type="xml">
            <tree string="Loan Type">
                <field name="name"/>
                <field name="ref_loan"/>
                <field name="ref_invoice"/>
                <field name="applied_date"/>
                <field name="partner_id"/>
                <field name="user_id"/>
                <field name="principal_amount"/>
                <field name="salida"/>
                
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="view_loan_req_form" model="ir.ui.view">
        <field name="name">loan.request.form</field>
        <field name="model">loan.request</field>
        <field name="priority">2</field>
        <field name="arch" type="xml">
        <form string="Loan Type">
            <header>
                <button name="action_confirm3" string="Confirmar" type="object" states="draft" groups="odoo_customer_supplier_loan_app.group_loan_user,odoo_customer_supplier_loan_app.group_loan_manager" class="oe_highlight"/>

                
                <field name="state" widget="statusbar" statusbar_visible="draft,applied,approve,closed"/>
             </header>

             <sheet>
                <div class="oe_button_box" name="button_box">
                    <button class="oe_stat_button" name="button_installment_entries"
                            string="Pagos de Prestamo" type="object"
                             icon="fa-list-ol" />
                </div>
                 <h2>
                     <field name="partner_id" attrs="{'readonly' : [('state','!=','draft')]}"/>
                     <br/>
                     <field name="name"/>
                     <field name="date" />

                     
                     <field name="is_compute" invisible='1'/>
                </h2>

                 <group>
                    <group>
                        
                        
                        <field name="loan_partner_type" invisible="1" attrs="{'readonly' : [('state','!=','draft')]}"/>

                        
                    </group>
                    <group>
                        <field name="entrada" />
                        <field name="salir" />                       
                        
                        
                        <field name="principal_amount" attrs="{'invisible': [('entrada', '=', False)]}" />
                        <field name="salida" attrs="{'invisible': [('salir', '=', False)]}"/>
                        <field name="approve_date" invisible="1"/>
                        <field name="company_id"  invisible="1"/>
                        <field name="user_id" invisible="1"/>
                    </group>
                 </group>
                 
                 <notebook>
                     <page string="General">
                         
                    </page>

                     <page string="Proofs">
                        
                     </page>

                     <page string="Accounting">
                         <group>
                            
                         </group>
                     </page>

                     <page string="Policies">
                        
                     </page>

                     <page string="Notes">
                         <field name="notes" attrs="{'readonly' : [('state','!=','draft')]}"/>
                     </page>
                 </notebook>
             </sheet>
        </form>
        </field>
    </record>

    <record id="loan_req_action" model="ir.actions.act_window">
        <field name="name">Solicitud</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">loan.request</field>
        <field name="view_mode">tree,form,kanban</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create"> </p>
            <p></p>
        </field>
    </record>


    

    <record id="seq_loan" model="ir.sequence">
        <field name="name">loan_sequencer</field>
        <field name="code">loan.request</field>
        <field name="prefix">ABONO</field>
        <field name="padding">4</field>
    </record>

    <menuitem id="sub_req_menu_loan" parent="menu_main_loans" name="Reportes" sequence="0"/>
    <menuitem action="loan_req_action" id="menu_loan_req" parent="sub_req_menu_loan" name="Solicitudes" sequence="0"/>

    <record id="loan_req_approve_action" model="ir.actions.act_window">
        <field name="name">Aprovaciones</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">loan.request</field>
        <field name="view_mode">tree,form,kanban</field>
        <field name="domain">[('state','=','applied')]</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create"> </p>
            <p></p>
        </field>
    </record>

    <menuitem action="loan_req_approve_action" id="menu_loan_req_to_approve" parent="sub_req_menu_loan" name="Aprobados" sequence="1" groups="group_loan_manager"/>

    <record id="loan_req_disburse_action" model="ir.actions.act_window">
        <field name="name">Desemborso</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">loan.request</field>
        <field name="view_mode">tree,form,kanban</field>
        <field name="domain">[('state','=','approve')]</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create"> </p>
            <p></p>
        </field>
    </record>



    <menuitem  id="sub_req_menu_loan_account" parent="menu_main_loans" name="Accounting" sequence="1" groups="group_loan_manager"/>
    <menuitem action="loan_req_disburse_action" id="menu_loan_req_to_disburse" parent="sub_req_menu_loan_account" name="Desemborso" sequence="0"/>



    </data>        
</odoo>